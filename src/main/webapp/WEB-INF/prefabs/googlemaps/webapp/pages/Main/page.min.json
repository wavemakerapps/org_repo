{
  "markup" : "%3Cwm-prefab-container+name%3D%22googlemap%22%3E++%0A++++%3Cwm-spinner+show%3D%22bind%3AisMapLoading%22+class%3D%22spinner-transparent%22%3E%3C%2Fwm-spinner%3E+%0A++++%3Cng-map+id%3D%22map%22+default-style%3D%22false%22+min-zoom%3D%222%22+%5Battr.zoom-to-include-markers%5D%3D%22zoom+%3D%3D%3D+%27Auto%27+%3F+%27auto%27+%3A+false%22+map-initialized%3D%22onMapLoad%22+class%3D%22full-height+full-width%22+%5Battr.center%5D%3D%22center%22+%5Battr.zoom%5D%3D%22zoomLevel+%7C%7C+5%22+draggable%3D%22true%22+%5Battr.map-type-id%5D%3D%22viewtype%22%3E+%0A++++++++%3Cdiv+ng-repeat%3D%22marker+in+markersData%22%3E+%0A++++++++++++%3Cmarker+%5Battr.position%5D%3D%22marker%3F.latlng%22+on-mouseover%3D%22onMarkerHover%28event%2C+marker%29%22+on-click%3D%22onMarkerClick%28event%2C+marker%29%22+%5Battr.icon%5D%3D%22marker%3F.iconData%22%3E+%0A++++++++++++%3C%2Fmarker%3E+%0A++++++++%3C%2Fdiv%3E+%0A++++++++%3Cshape+name%3D%22circle%22+ng-repeat%3D%22shape+in+markersData%22+%5Battr.stroke-color%5D%3D%22shape%3F.color%22+stroke-opacity%3D%220.5%22+stroke-weight%3D%222%22+%5Battr.fill-color%5D%3D%22shape%3F.color%22+fill-opacity%3D%220.35%22+%5Battr.center%5D%3D%22shape%3F.latlng%22+%5Battr.radius%5D%3D%22shape%3F.radius%22+show%3D%22bind%3Aradius%22%3E+%0A++++++++%3C%2Fshape%3E+%0A++++++++%3Cdirections+%5Battr.travel-mode%5D%3D%22travelMode%22+%5Battr.waypoints%5D%3D%22directionsData%3F.wayPoints%22+%5Battr.origin%5D%3D%22directionsData%3F.origin%22+%5Battr.destination%5D%3D%22directionsData%3F.destination%22+show%3D%22bind%3AdirectionsData.wayPoints%22%3E+%0A++++++++%3C%2Fdirections%3E+%0A++++++++%3Cdirections+%5Battr.travel-mode%5D%3D%22travelMode%22+%5Battr.origin%5D%3D%22directionsData%3F.origin%22+%5Battr.destination%5D%3D%22directionsData%3F.destination%22+show%3D%22bind%3A%21directionsData.wayPoints%22%3E+%0A++++++++%3C%2Fdirections%3E+%0A++++++++%3Ctraffic-layer+show%3D%22bind%3AtrafficLayer%22%3E%3C%2Ftraffic-layer%3E+%0A++++++++%3Ctransit-layer+show%3D%22bind%3AtransitLayer%22%3E%3C%2Ftransit-layer%3E+%0A++++++++%3Cheatmap-layer+id%3D%22heatmapLayer%22+data%3D%22heatmapData%22+show%3D%22bind%3AisHeatMapDataReady%22%3E%3C%2Fheatmap-layer%3E+%0A++++%3C%2Fng-map%3E++%0A%3C%2Fwm-prefab-container%3E",
  "script" : "var+%24q+%3D+App.getDependency%28%22%24q%22%29%3B%0Avar+%24compile+%3D+App.getDependency%28%22%24compile%22%29%3B%0Avar+wmToaster+%3D+App.getDependency%28%22ToasterService%22%29%3B%0Avar+%24http+%3D+App.getDependency%28%22HttpService%22%29%3B%0Avar+NgMap+%3D+App.getDependency%28%22NgMap%22%29%3B%0Avar+%24el+%3D+%24%3B%0Avar+Utils+%3D+App.getDependency%28%22Utils%22%29%3B%0A%2F*global+WM%2C_%2Cgoogle%2CApplication*%2F%0A%0A%27use+strict%27%3B%0Avar+prefabScope%2C+_locations+%3D+%5B%5D%2C%0A++++_icon+%3D+%27%27%2C%0A++++_lat+%3D+%27%27%2C%0A++++_lng+%3D+%27%27%2C%0A++++latSum+%3D+0%2C%0A++++lngSum+%3D+0%2C%0A++++latNaNCount+%3D+0%2C%0A++++lngNaNCount+%3D+0%2C%0A++++infoWindow%2C+customMarker%2C+customMarkers+%3D+%5B%5D%2C%0A++++defaultCenter+%3D+%27current-position%27%2C%0A++++_oldBoundLocations+%3D+-1%2C%0A++++_buildMap%2C+_updateDirections%2C+_refreshMap%2C+_deregisterFns+%3D+%7B%0A++++++++%27directions%27%3A+_.noop%0A++++%7D%2C%0A++++addressFetchPromises+%3D+%5B%5D%2C%0A++++heatmap%2C+heatmapHidden+%3D+false%2C%0A++++_checkMapStatus%3B%0APrefab.isMapLoading+%3D+true%3B%0APrefab.heatmapData+%3D+%5B%5D%3B%0APrefab.maps+%3D+%5B%5D%3B%0APrefab.markersData+%3D+%5B%5D%3B%0APrefab.directionsData+%3D+%5B%5D%3B%0APrefab.onMapLoad+%3D+_refreshMap%3B+%2F%2Fneeded+whenever+the+performance+is+too+low+on+browser.%0A%2F%2Fsets+the+heat+map+layer+properties%0Afunction+assignHeatMapLayers%28%29+%7B%0A++++heatmap+%3D+_.get%28Prefab%2C+%27maps%5B0%5D.heatmapLayers.heatmapLayer%27%29%3B%0A%7D%0A%2F%2Freturns+the+LatLng+Object+required+for+mapping+the+markers%0Afunction+constructLatLngObject%28lat%2C+lng%29+%7B%0A++++if+%28google%29+%7B%0A++++++++return+new+google.maps.LatLng%28lat%2C+lng%29%3B%0A++++%7D%0A%7D%0A%0Afunction+markLatLng%28lat%2C+lng%2C+markerId%29+%7B%0A++++%2F%2Fpoints+the+marker+based+on+lat+%26+lng%0A++++if+%28%21Prefab.maps%5B0%5D+%26%26+%28%21_lat+%7C%7C+%21_lng%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++if+%28isNaN%28lat%29+%7C%7C+isNaN%28lng%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++clearNoIdMarker%28%29%3B%0A++++var+latlngObj+%3D+constructLatLngObject%28lat%2C+lng%29%3B%0A++++customMarker+%3D+new+google.maps.Marker%28%7B%0A++++++++%27position%27%3A+latlngObj%2C%0A++++++++%27map%27%3A+Prefab.maps%5B0%5D%2C%0A++++++++%27draggable%27%3A+true%2C%0A++++++++%27animation%27%3A+google.maps.Animation.DROP%0A++++%7D%29%3B%0A%0A++++Prefab.maps%5B0%5D.panTo%28latlngObj%29%3B%0A++++if+%28markerId%29+%7B%0A++++++++customMarker.%24%24id+%3D+markerId.toString%28%29%3B%0A++++%7D%0A++++customMarkers.push%28customMarker%29%3B%0A%7D%0A%0Afunction+markAddress%28address%2C+markerId%29+%7B%0A++++%2F%2Fpoints+the+marker+based+on+address+%2C+can+also+be+used+when+lat%26lng+is+in+the+same+string%0A++++var+baseUrl%2C+results%2C+geometryLocations%3B%0A++++if+%28%21address%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++baseUrl+%3D+%27https%3A%2F%2Fmaps.googleapis.com%2Fmaps%2Fapi%2Fgeocode%2Fjson%3Faddress%3D%27%3B%0A++++%24http.get%28baseUrl+%2B+address%29.then%28function+%28response%29+%7B%0A++++++++results+%3D+response.data.results%5B0%5D%3B%0A++++++++if+%28%21results%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A++++++++geometryLocations+%3D+results.geometry.location%3B%0A++++++++markLatLng%28geometryLocations.lat%2C+geometryLocations.lng%2C+markerId%29%3B%0A++++%7D%29%3B%0A%0A%7D%0A%0Afunction+_removeMarkers%28markerArray%29+%7B%0A++++%2F%2Fremoves+all+the+markers+if+the+markerArray+is+not+passed%0A++++if+%28%21markerArray%29+%7B%0A++++++++_.forEach%28customMarkers%2C+function+%28marker%29+%7B%0A++++++++++++marker.setMap%28null%29%3B%0A++++++++++++marker+%3D+null%3B%0A++++++++%7D%29%3B%0A%0A++++++++customMarkers+%3D+%5B%5D%3B%0A++++%7D+else+%7B%0A++++++++_.forEach%28customMarkers%2C+function+%28marker%2C+index%29+%7B%0A++++++++++++if+%28marker%29+%7B%0A++++++++++++++++if+%28_.includes%28markerArray%2C+marker.%24%24id.toString%28%29%29%29+%7B%0A++++++++++++++++++++marker.setMap%28null%29%3B%0A++++++++++++++++++++marker+%3D+null%3B%0A++++++++++++++++++++customMarkers.splice%28index%2C+1%29%3B%0A++++++++++++++++%7D%0A++++++++++++%7D%0A++++++++%7D%29%3B%0A%0A++++%7D%0A%7D%0A%0Afunction+clearNoIdMarker%28%29+%7B%0A++++_.forEach%28customMarkers%2C+function+%28marker%2C+index%29+%7B%0A++++++++if+%28marker%29+%7B%0A++++++++++++if+%28%21marker.%24%24id%29+%7B%0A++++++++++++++++marker.setMap%28null%29%3B%0A++++++++++++++++marker+%3D+null%3B%0A++++++++++++++++customMarkers.splice%28index%2C+1%29%3B%0A++++++++++++%7D%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%7D%0APrefab.clearMarkers+%3D+_removeMarkers%3B%0A%0Afunction+removeMarker%28markerIds%29+%7B%0A++++%2F%2Fremoves+the+marker+placed+based+on+marker+Id%0A++++var+markerArray+%3D+%5B%5D%3B%0A++++if+%28%21markerIds%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++if+%28_.isObject%28markerIds%29+%7C%7C+_.isArray%28markerIds%29%29+%7B%0A++++++++markerArray+%3D+markerIds%3B%0A++++++++_removeMarkers%28markerArray%29%3B%0A++++%7D+else+%7B%0A++++++++markerArray.push%28markerIds%29%3B%0A++++++++_removeMarkers%28markerArray%29%3B%0A++++%7D%0A%7D%0A%0Afunction+prepareLatLngData%28lat%2C+lng%29+%7B%0A++++var+latlng%3B%0A++++if+%28lat+%26%26+lng%29+%7B%0A++++++++latlng+%3D+%27%5B%27+%2B+lat+%2B+%27%2C+%27+%2B+lng+%2B+%27%5D%27%3B%0A++++%7D%0A++++if+%28isNaN%28lat%29+%7C%7C+lat+%3D%3D%3D+null+%7C%7C+lat+%3D%3D%3D+%27%27%29+%7B%0A++++++++latNaNCount%2B%2B%3B%0A++++%7D+else+%7B%0A++++++++latSum+%2B%3D+Number%28lat%29%3B%0A++++%7D%0A++++if+%28isNaN%28lng%29+%7C%7C+lng+%3D%3D%3D+null+%7C%7C+lng+%3D%3D%3D+%27%27%29+%7B%0A++++++++lngNaNCount%2B%2B%3B%0A++++%7D+else+%7B%0A++++++++lngSum+%2B%3D+Number%28lng%29%3B%0A++++%7D%0A++++return+latlng%3B%0A%7D%0A%0Afunction+setCenter%28%29+%7B%0A++++%2F%2Fbased+on+the+locations+binded%2C+sets+the+center+of+the+map%0A++++var+len+%3D+Prefab.maptype+%3D%3D%3D+%27Markers%27+%3F+Prefab.markersData.length+%3A+Prefab.heatmapData.length%2C%0A++++++++lat+%3D+latSum+%2F+%28len+-+latNaNCount%29%2C%0A++++++++lng+%3D+lngSum+%2F+%28len+-+lngNaNCount%29%3B%0A++++if+%28%21len%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++Prefab.center+%3D+%28len+%3D%3D%3D+latNaNCount+%7C%7C+len+%3D%3D%3D+lngNaNCount%29+%3F+%27%5B0%2C0%5D%27+%3A+%27%5B%27+%2B+lat+%2B+%27%2C+%27+%2B+lng+%2B+%27%5D%27%3B%0A++++Prefab.centerData+%3D+%7B%0A++++++++%27lat%27%3A+lat%2C%0A++++++++%27lng%27%3A+lng%0A++++%7D%3B%0A%0A++++_refreshMap%28%29%3B%0A%7D%0A%0Afunction+alterMarkersObject%28markerIndex%2C+responseLatLng%29+%7B%0A++++%2F%2Falter+the+already+prepared+marker+object%27s+latlng+property%0A++++if+%28Prefab.markersData%5BmarkerIndex%5D%29+%7B%0A++++++++Prefab.markersData%5BmarkerIndex%5D.latlng+%3D+responseLatLng%3B%0A++++%7D%0A%7D%0A%2F%2F+removes+the+improper+markers+from+the+model%0Afunction+sanitizeMarkers%28%29+%7B%0A++++_.remove%28Prefab.markersData%2C+function+%28marker%29+%7B%0A++++++++return+%21marker.latlng%3B%0A++++%7D%29%3B%0A%0A++++setCenter%28%29%3B%0A%7D%0A%0Afunction+getLatLng%28markerIndex%2C+address%29+%7B%0A++++%2F%2Fthis+function+fetches+the+lat+and+lng+and+constructs+the+marker+Object%0A++++var+lat%2C+lng%2C+addrPromise%3B%0A++++if+%28%21address%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++addrPromise+%3D+%24q.defer%28%29%3B%0A++++%24http.get%28%27https%3A%2F%2Fmaps.googleapis.com%2Fmaps%2Fapi%2Fgeocode%2Fjson%3Faddress%3D%27+%2B+address%29.then%28function+%28response%29+%7B%0A++++++++addrPromise.resolve%28response%29%3B%0A++++++++var+resultdataSet+%3D+response.data.results%5B0%5D%2C%0A++++++++++++geometryLocations%2C+latlng%3B%0A++++++++if+%28resultdataSet%29+%7B%0A++++++++++++geometryLocations+%3D+resultdataSet.geometry.location%3B%0A++++++++++++lat+%3D+geometryLocations.lat%3B%0A++++++++++++lng+%3D+geometryLocations.lng%3B%0A++++++++++++latlng+%3D+prepareLatLngData%28lat%2C+lng%29%3B%0A++++++++++++alterMarkersObject%28markerIndex%2C+latlng%29%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A++++addressFetchPromises.push%28addrPromise.promise%29%3B%0A%7D%0A%2F%2Fselects+the+activeMarker+based+on+markerindex%0Afunction+assignActiveMarker%28p%29+%7B%0A++++_.forEach%28_locations%2C+function+%28marker%29+%7B%0A++++++++if+%28marker.markerIndex+%3D%3D%3D+p.markerIndex%29+%7B%0A++++++++++++prefabScope.activeMarker+%3D+marker%3B%0A++++++++++++return+false%3B%0A++++++++%7D%0A++++%7D%29%3B%0A%0A%7D%0APrefab.onMarkerHover+%3D+function+%28event%2C+p%29+%7B%0A++++assignActiveMarker%28p%29%3B%0A++++Utils.triggerFn%28Prefab.onMarkerhover%2C+%7B%0A++++++++widget%3A+Prefab%0A++++%7D%29%3B%0A%0A%7D%3B%0A%0APrefab.onMarkerClick+%3D+function+%28event%2C+p%29+%7B%0A++++Utils.triggerFn%28Prefab.onMarkerclick%2C+%7B%0A++++++++widget%3A+Prefab%0A++++%7D%29%3B%0A%0A++++Prefab.showInfoWindow%28event%2C+p%29%3B%0A%7D%3B%0A%0APrefab.showInfoWindow+%3D+function+%28event%2C+p%29+%7B%0A++++%2F%2Fopens+the+info-window+specific+to+the+marker+%2C+fixes+the+bug+%27info-window%27+directive+fails+to+load+the+info%0A++++if+%28%21%28Prefab.info+%7C%7C+Prefab.setInfoWindow%29+%7C%7C+%21google+%7C%7C+%21p.latlng%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++var+content+%3D+%27%27%2C%0A++++++++latlngData+%3D+p.latlng.replace%28%2F%5C%5B%7C%5C%5D%2Fg%2C+%27%27%29.split%28%27%2C%27%29%2C%0A++++++++center+%3D+constructLatLngObject%28latlngData%5B0%5D%2C+latlngData%5B1%5D%29%3B%0A++++if+%28infoWindow%29+%7B%0A++++++++%2F%2Fclose+other+info+windows+if+they%27re+open%0A++++++++infoWindow.close%28%29%3B%0A++++%7D%0A++++if+%28Prefab.setInfoWindow%29+%7B%0A++++++++content+%3D+%24compile%28%27%3Cdiv%3E%27+%2B+Utils.triggerFn%28Prefab.setInfoWindow%29+%2B+%27%3C%2Fdiv%3E%27%29%28Prefab.%24new%28%29%29%5B0%5D.outerHTML%3B%0A++++%7D+else+%7B%0A++++++++content+%3D+%27%3Cdiv%3E%3Cp%3E%27+%2B+p.information+%2B+%27%3C%2Fp%3E%3C%2Fdiv%3E%27%3B%0A++++%7D%0A++++infoWindow+%3D+new+google.maps.InfoWindow%28%7B%0A++++++++%27content%27%3A+content%2C%0A++++++++%27pixelOffset%27%3A+new+google.maps.Size%280%2C+-30%29%0A++++%7D%29%3B%0A%0A++++infoWindow.setPosition%28center%29%3B%0A++++infoWindow.open%28Prefab.maps%5B0%5D%29%3B%0A%7D%3B%0A%0A%2F%2Fresets+the+map+and+when+the+binded+dataset+is+empty%2C+sets+the+defaultCenter%0Afunction+resetMap%28dataset%29+%7B%0A++++latSum+%3D+lngSum+%3D+latNaNCount+%3D+lngNaNCount+%3D+0%3B%0A++++Prefab.heatmapData.length+%3D+0%3B%0A++++Prefab.markersData.length+%3D+0%3B%0A++++assignHeatMapLayers%28%29%3B%0A++++if+%28heatmap%29+%7B%0A++++++++heatmap.setMap%28heatmap.getMap%28%29+%3F+null+%3A+Prefab.maps%5B0%5D%29%3B%0A++++++++heatmapHidden+%3D+true%3B%0A++++%7D%0A++++if+%28%21dataset%29+%7B%0A++++++++Prefab.center+%3D+%27%5B0%2C0%5D%27%3B%0A++++++++Prefab.centerData+%3D+%7B%0A++++++++++++lat%3A+0%2C%0A++++++++++++lng%3A+0%0A++++++++%7D%3B%0A%0A++++++++_refreshMap%28%29%3B%0A++++++++return+false%3B%0A++++%7D%0A++++return+true%3B%0A%7D%0A%2F%2F+adds+marker+to+the+markersData+model%0Afunction+addMarkerToModel%28markerObj%29+%7B%0A++++Prefab.markersData.push%28markerObj%29%3B%0A%7D%0A%2F%2Fconstructs+the+marker+object%0Afunction+constructMarkersModel%28%29+%7B%0A++++var+markerIndex+%3D+0%3B%0A++++if+%28%21resetMap%28_locations%29%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++_.forEach%28_locations%2C+function+%28marker%2C+index%29+%7B%0A++++++++var+lat%2C+lng%2C+address+%3D+%27%27%2C%0A++++++++++++markerObj%3B%0A++++++++if+%28marker+%3D%3D%3D+null+%7C%7C+%21marker%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A++++++++marker.markerIndex+%3D+markerIndex%3B%0A++++++++markerObj+%3D+%7B%0A++++++++++++%27iconData%27%3A+_icon+%3F+Utils.findValueOf%28marker%2C+_icon%29+%3A+%27%27%2C%0A++++++++++++%27information%27%3A+Prefab.info+%3F+Utils.findValueOf%28marker%2C+Prefab.info%29+%3A+%27%27%2C%0A++++++++++++%27id%27%3A+Prefab.%24id+%2B+%27_%27+%2B+index%2C%0A++++++++++++%27color%27%3A+Prefab.shade+%3F+Utils.findValueOf%28marker%2C+Prefab.shade%29+%3A+%27%27%2C%0A++++++++++++%27radius%27%3A+Prefab.radius+%3F+Utils.findValueOf%28marker%2C+Prefab.radius%29+%3A+%27%27%2C%0A++++++++++++%27markerIndex%27%3A+markerIndex%0A++++++++%7D%3B%0A%0A++++++++if+%28Prefab.markertype+%3D%3D%3D+%27Address%27%29+%7B%0A++++++++++++if+%28%21Prefab.address%29+%7B%0A++++++++++++++++return%3B%0A++++++++++++%7D%0A++++++++++++addMarkerToModel%28markerObj%29%3B%0A++++++++++++Prefab.addressData+%3D+Prefab.address.split%28%27+%27%29%3B%0A++++++++++++_.forEach%28Prefab.addressData%2C+function+%28addrValue%2C+index%29+%7B%0A++++++++++++++++addrValue+%3D+Utils.findValueOf%28marker%2C+Prefab.addressData%5Bindex%5D%29+%2B+%27+%27%3B%0A++++++++++++++++address+%2B%3D+addrValue+%7C%7C+%27%27%3B%0A++++++++++++%7D%29%3B%0A%0A++++++++++++getLatLng%28markerIndex%2C+address%29%3B%0A++++++++%7D+else+%7B%0A++++++++++++lat+%3D+Utils.findValueOf%28marker%2C+_lat%29%3B%0A++++++++++++lng+%3D+Utils.findValueOf%28marker%2C+_lng%29%3B%0A++++++++++++if+%28%21lat+%7C%7C+%21lng%29+%7B%0A++++++++++++++++return%3B%0A++++++++++++%7D%0A++++++++++++markerObj.latlng+%3D+prepareLatLngData%28lat%2C+lng%29%3B%0A++++++++++++addMarkerToModel%28markerObj%29%3B%0A++++++++%7D%0A++++++++markerIndex%2B%2B%3B%0A++++%7D%29%3B%0A%0A++++%24q.all%28addressFetchPromises%29.then%28sanitizeMarkers%29%3B%0A%7D%0A%0Afunction+buildMap%28%29+%7B%0A++++if+%28Prefab.maptype+%21%3D%3D+%27Markers%27%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++var+paramsExists%3B%0A++++if+%28_locations%29+%7B%0A++++++++paramsExists+%3D+Prefab.address+%3F+true+%3A+%28%21%28%21_lat+%7C%7C+%21_lng%29%29%3B%0A++++++++if+%28%21paramsExists%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A++++++++if+%28%21Prefab.address%29+%7B%0A++++++++++++constructMarkersModel%28%29%3B%0A++++++++++++setCenter%28%29%3B%0A++++++++%7D+else+%7B%0A++++++++++++constructMarkersModel%28%29%3B%0A++++++++%7D%0A++++%7D+else+%7B%0A++++++++Prefab.center+%3D+defaultCenter%3B%0A++++%7D%0A%7D%0A_buildMap+%3D+_.debounce%28buildMap%2C+50%29%3B%0A%0Afunction+onMarkerTypeChange%28newVal%29+%7B%0A++++var+wp+%3D+Prefab.widgetProps%3B%0A++++if+%28newVal+%3D%3D%3D+%27Address%27%29+%7B%0A++++++++wp.address.show+%3D+true%3B%0A++++++++wp.lat.show+%3D+wp.lng.show+%3D+false%3B%0A++++++++App.notify%28%27set-markup-attr%27%2C+Prefab.widgetid%2C+%7B%0A++++++++++++%27lat%27%3A+%27%27%2C%0A++++++++++++%27lng%27%3A+%27%27%0A++++++++%7D%29%3B%0A%0A++++%7D+else+if+%28newVal+%3D%3D%3D+%27LatLng%27%29+%7B%0A++++++++wp.address.show+%3D+false%3B%0A++++++++wp.lat.show+%3D+wp.lng.show+%3D+true%3B%0A++++++++App.notify%28%27set-markup-attr%27%2C+Prefab.widgetid%2C+%7B%0A++++++++++++%27address%27%3A+%27%27%0A++++++++%7D%29%3B%0A%0A++++%7D%0A%7D%0A%0Afunction+assignLocations%28dataset%2C+columns%2C+wp%29+%7B%0A++++var+TypeUtils%2C+options%3B%0A++++dataset+%3D+_.cloneDeep%28dataset%29%3B%0A++++_locations+%3D+%5B%5D%3B%0A++++if+%28_.isArray%28dataset%29%29+%7B%0A++++++++_locations+%3D+dataset%3B%0A++++%7D+else+%7B%0A++++++++if+%28_.isObject%28dataset%29+%26%26+_.isArray%28dataset.data%29+%26%26+%21_.isEmpty%28dataset.data%29%29+%7B%0A++++++++++++_locations+%3D+dataset.data%3B%0A++++++++%7D+else+%7B%0A++++++++++++_locations+%3D+dataset+%3F+%5Bdataset%5D+%3A+%5B%5D%3B%0A++++++++%7D%0A++++%7D%0A++++if+%28Prefab.widgetid%29+%7B%0A++++++++TypeUtils+%3D+Utils.getService%28%27TypeUtils%27%29%3B%0A++++++++columns+%3D+TypeUtils.getFieldsForExpr%28Prefab.bindlocations%29%3B%0A++++++++options+%3D+%5B%27%27%5D%3B%0A++++++++wp.lat.options+%3D+options%3B%0A++++++++wp.lng.options+%3D+options%3B%0A++++++++wp.icon.options+%3D+options%3B%0A++++++++wp.info.options+%3D+options%3B%0A++++++++wp.shade.options+%3D+options%3B%0A++++++++wp.radius.options+%3D+options%3B%0A++++++++wp.address.options+%3D+options%3B%0A++++++++if+%28columns.length+%3E+0%29+%7B%0A++++++++++++_.forEach%28columns%2C+function+%28key%29+%7B%0A++++++++++++++++options.push%28key%29%3B%0A++++++++++++%7D%29%3B%0A%0A++++++++%7D+else+if+%28_locations.length+%3E+0%29+%7B%0A++++++++++++_.forEach%28_locations%5B0%5D%2C+function+%28val%2C+key%29+%7B%0A++++++++++++++++options.push%28key%29%3B%0A++++++++++++%7D%29%3B%0A%0A++++++++%7D%0A++++%7D%0A%7D%0A%0Afunction+onLocationsChange%28newVal%29+%7B%0A++++var+wp+%3D+Prefab.widgetProps%2C%0A++++++++columns+%3D+%5B%5D%3B%0A++++%2F%2Fassign+the+locations+and+options%0A++++assignLocations%28newVal%2C+columns%2C+wp%29%3B%0A++++if+%28Prefab.widgetid%29+%7B%0A++++++++if+%28%28_oldBoundLocations+%21%3D%3D+-1%29+%26%26+%28_oldBoundLocations+%21%3D%3D+Prefab.bindlocations%29%29+%7B%0A++++++++++++%2F*Remove+the+attributes+from+the+markup*%2F%0A%0A++++++++++++App.notify%28%27set-markup-attr%27%2C+Prefab.widgetid%2C+%7B%0A++++++++++++++++%27lat%27%3A+%27%27%2C%0A++++++++++++++++%27lng%27%3A+%27%27%2C%0A++++++++++++++++%27icon%27%3A+%27%27%2C%0A++++++++++++++++%27info%27%3A+%27%27%2C%0A++++++++++++++++%27shade%27%3A+%27%27%2C%0A++++++++++++++++%27radius%27%3A+%27%27%2C%0A++++++++++++++++%27address%27%3A+%27%27%0A++++++++++++%7D%29%3B%0A%0A++++++++++++Prefab.lat+%3D+%27%27%3B%0A++++++++++++Prefab.lng+%3D+%27%27%3B%0A++++++++++++Prefab.icon+%3D+%27%27%3B%0A++++++++++++Prefab.info+%3D+%27%27%3B%0A++++++++++++Prefab.shade+%3D+%27%27%3B%0A++++++++++++Prefab.radius+%3D+%27%27%3B%0A++++++++++++Prefab.address+%3D+%27%27%3B%0A++++++++++++_oldBoundLocations+%3D+Prefab.bindlocations%3B%0A++++++++%7D%0A++++++++if+%28_oldBoundLocations+%3D%3D%3D+-1%29+%7B%0A++++++++++++_oldBoundLocations+%3D+Prefab.bindlocations%3B%0A++++++++%7D%0A++++%7D%0A++++_buildMap%28%29%3B%0A%7D%0A%0Afunction+updateDirections%28%29+%7B%0A++++if+%28Prefab.origin+%26%26+Prefab.destination%29+%7B%0A++++++++Utils.triggerFn%28_deregisterFns.directions%29%3B%0A++++++++%2F%2Fwatch+for+the+directions%0A++++++++_deregisterFns.directions+%3D+angular.%24watch%28%27%3A%3A+maps%5B0%5D.directionsRenderers%27%2C+function+%28nv%29+%7B%0A++++++++++++%2F%2Fif+there+are+no+directions+return+back.+nv+is+undefined+between+page+navigation+in+studio+mode%0A++++++++++++if+%28%21nv%29+%7B%0A++++++++++++++++return%3B%0A++++++++++++%7D%0A++++++++++++var+directionsObj+%3D+nv%2C%0A++++++++++++++++distance+%3D+0%2C%0A++++++++++++++++duration+%3D+0%3B%0A++++++++++++%2F%2Fiterate+throughout+the+object+as+there+might+be+multiple+waypoints+and+directions+on+the+map.%0A++++++++++++_.forEach%28directionsObj%2C+function+%28direction%29+%7B%0A++++++++++++++++var+routes+%3D+_.get%28direction%2C+%27directions.routes%27%29%3B%0A++++++++++++++++_.forEach%28routes%2C+function+%28route%29+%7B%0A++++++++++++++++++++var+legs+%3D+route.legs%3B%0A++++++++++++++++++++_.forEach%28legs%2C+function+%28leg%29+%7B%0A++++++++++++++++++++++++distance+%2B%3D+_.get%28leg%2C+%27distance.value%27%29+%7C%7C+0%3B%0A++++++++++++++++++++++++duration+%2B%3D+_.get%28leg%2C+%27duration.value%27%29+%7C%7C+0%3B%0A++++++++++++++++++++%7D%29%3B%0A%0A++++++++++++++++%7D%29%3B%0A%0A++++++++++++%7D%29%3B%0A%0A++++++++++++distance+%3D+distance+%3F+_.round%28distance+%2F+1000%2C+2%29+%3A+%27%27%3B%0A++++++++++++duration+%3D+duration+%3F+_.round%28duration+%2F+3600%2C+2%29+%3A+%27%27%3B%0A++++++++++++Prefab.distance+%3D+distance%3B%0A++++++++++++Prefab.duration+%3D+duration%3B%0A++++++++%7D%29%3B%0A%0A++++%7D%0A%7D%0A_updateDirections+%3D+_.debounce%28updateDirections%2C+50%29%3B%0A%0Afunction+prepareWayPoints%28wayPointsObj%29+%7B%0A++++if+%28Prefab.waypoints%29+%7B%0A++++++++var+newWayPoints+%3D+%5B%5D%2C%0A++++++++++++showStopOver%3B%0A++++++++if+%28_.isArray%28Prefab.waypoints%29%29+%7B%0A++++++++++++Prefab.directionsData.wayPoints+%3D+%5B%5D%3B%0A++++++++++++showStopOver+%3D+true%3B%0A++++++++++++if+%28wayPointsObj%29+%7B%0A++++++++++++++++_.forEach%28wayPointsObj%2C+function+%28wayPoint%29+%7B%0A++++++++++++++++++++wayPoint.stopover+%3D+Prefab.stopover%3B%0A++++++++++++++++++++newWayPoints.push%28wayPoint%29%3B%0A++++++++++++++++%7D%29%3B%0A%0A++++++++++++++++Prefab.directionsData.wayPoints+%3D+newWayPoints%3B%0A++++++++++++%7D%0A++++++++%7D+else+if+%28_.isString%28Prefab.waypoints%29+%26%26+CONSTANTS.isStudioMode%29+%7B%0A++++++++++++showStopOver+%3D+false%3B%0A++++++++++++wmToaster.warn%28%27Waypoints+bound+cannot+be+of+string+type%2C+Please+refer+documentation+for+more+details%27%29%3B%0A++++++++%7D%0A++++++++Prefab.widgetProps.stopover.show+%3D+showStopOver%3B%0A++++%7D%0A%7D%0A%2F%2Fprepare+the+params+necessary+for+the+heat+map%0Afunction+prepareHeatMapData%28newVal%29+%7B%0A++++var+wp+%3D+Prefab.widgetProps%2C%0A++++++++columns+%3D+%5B%5D%3B%0A++++if+%28%21resetMap%28newVal%29%29+%7B%0A++++++++%2F%2Fif+newVal+is+empty+then+reset+the+map+and+return%0A++++++++return%3B%0A++++%7D%0A++++assignLocations%28newVal%2C+columns%2C+wp%29%3B%0A++++%2F%2Fif+lat+lng+properties+are+not+assigned+do+not+construct+the+heatmap+model%0A++++if+%28%21_lat+%7C%7C+%21_lng%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++_.forEach%28_locations%2C+function+%28location%29+%7B%0A++++++++if+%28location+%3D%3D%3D+null+%7C%7C+%21location%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A++++++++var+loc+%3D+%7B%7D%3B%0A%0A++++++++loc.latitude+%3D+Utils.findValueOf%28location%2C+_lat%29%3B%0A++++++++loc.longitude+%3D+Utils.findValueOf%28location%2C+_lng%29%3B%0A++++++++if+%28%21loc.latitude+%7C%7C+%21loc.longitude%29+%7B%0A++++++++++++return%3B%0A++++++++%7D%0A++++++++prepareLatLngData%28loc.latitude%2C+loc.longitude%29%3B%0A++++++++Prefab.heatmapData.push%28constructLatLngObject%28loc.latitude%2C+loc.longitude%29%29%3B%0A++++%7D%29%3B%0A%0A++++Prefab.isHeatMapDataReady+%3D+true%3B%0A++++setCenter%28%29%3B%0A++++assignHeatMapLayers%28%29%3B%0A++++if+%28heatmapHidden+%26%26+heatmap%29+%7B%0A++++++++heatmap.setMap%28Prefab.maps%5B0%5D%29%3B%0A++++++++heatmapHidden+%3D+false%3B%0A++++%7D%0A%7D%0A%0Afunction+changeMapType%28type%29+%7B%0A++++if+%28type+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++onLocationsChange%28Prefab.locations%29%3B%0A++++%7D+else+if+%28type+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++prepareHeatMapData%28Prefab.locations%29%3B%0A++++%7D%0A%7D%0A%2F%2Fdepending+on+map+type+set+the+paramters+and+other+properties%0Afunction+mapTypeOperations%28newVal%29+%7B%0A++++if+%28Prefab.widgetid%29+%7B%0A++++++++var+wp+%3D+Prefab.widgetProps%2C%0A++++++++++++markerProps+%3D+%5B%27onMarkerclick%27%2C+%27onMarkerhover%27%2C+%27onClick%27%2C+%27radius%27%2C+%27shade%27%2C+%27info%27%2C+%27icon%27%2C+%27markertype%27%2C+%27locations%27%2C+%27lat%27%2C+%27lng%27%2C+%27viewtype%27%5D%2C%0A++++++++++++heatmapProps+%3D+%5B%27locations%27%2C+%27lat%27%2C+%27lng%27%2C+%27gradient%27%2C+%27pixeldensity%27%2C+%27opacity%27%2C+%27viewtype%27%5D%2C%0A++++++++++++routeProps+%3D+%5B%27origin%27%2C+%27destination%27%2C+%27trafficlayer%27%2C+%27transitlayer%27%2C+%27travelmode%27%2C+%27waypoints%27%2C+%27stopover%27%2C+%27viewtype%27%5D%2C%0A++++++++++++commonProps+%3D+%5B%27name%27%2C+%27tabindex%27%2C+%27maptype%27%2C+%27zoom%27%2C+%27height%27%2C+%27width%27%2C+%27show%27%2C+%27animation%27%2C+%27onLoad%27%2C+%27onDestroy%27%2C+%27accessroles%27%2C+%27class%27%2C+%27margin%27%2C+%27active%27%2C+%27debugurl%27%2C+%27showindevice%27%5D%2C%0A++++++++++++maptypeProps%3B%0A++++++++wp.zoom.options+%3D+%5B%27Auto%27%2C+2%2C+3%2C+4%2C+5%2C+6%2C+7%2C+8%2C+9%2C+10%2C+11%2C+12%2C+13%2C+14%2C+15%2C+16%2C+17%2C+18%2C+19%2C+20%2C+21%5D%3B%0A++++++++if+%28newVal+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++++++wp.lat.displayName+%3D+%27Marker+Latitude%27%3B%0A++++++++++++wp.lng.displayName+%3D+%27Marker+Longitude%27%3B%0A++++++++++++maptypeProps+%3D+markerProps%3B%0A++++++++%7D+else+if+%28newVal+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++++++wp.lat.displayName+%3D+%27Latitude%27%3B%0A++++++++++++wp.lng.displayName+%3D+%27Longitude%27%3B%0A++++++++++++maptypeProps+%3D+heatmapProps%3B%0A++++++++%7D+else+%7B%0A++++++++++++maptypeProps+%3D+routeProps%3B%0A++++++++%7D%0A++++++++_.forEach%28wp%2C+function+%28property%2C+key%29+%7B%0A++++++++++++if+%28_.includes%28maptypeProps%2C+key%29%29+%7B%0A++++++++++++++++property.show+%3D+true%3B%0A++++++++++++%7D+else+if+%28%21_.includes%28commonProps%2C+key%29%29+%7B%0A++++++++++++++++property.show+%3D+false%3B%0A++++++++++++%7D%0A++++++++%7D%29%3B%0A%0A++++++++%2F%2Fset+the+Address+%2C+LatLng+properties+based+on+maptype+and+location+type%0A++++++++if+%28newVal+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++++++if+%28Prefab.markertype+%3D%3D%3D+%27Address%27%29+%7B%0A++++++++++++++++wp.lat.show+%3D+wp.lng.show+%3D+false%3B%0A++++++++++++++++wp.address.show+%3D+true%3B%0A++++++++++++%7D+else+%7B%0A++++++++++++++++wp.address.show+%3D+false%3B%0A++++++++++++++++wp.lat.show+%3D+wp.lng.show+%3D+true%3B%0A++++++++++++%7D%0A++++++++%7D%0A++++++++if+%28newVal+%21%3D%3D+%27Route%27%29+%7B%0A++++++++++++resetMap%28%29%3B%0A++++++++++++Prefab.directionsData.length+%3D+0%3B%0A++++++++%7D+else+%7B%0A++++++++++++Prefab.markersData.length+%3D+0%3B%0A++++++++++++Prefab.heatmapData.length+%3D+0%3B%0A++++++++%7D%0A++++%7D%0A++++changeMapType%28newVal%29%3B%0A%7D%0A%2F%2Fhandles+the+property+value+changes+made+to+gradient%2Copacity%2C+pixel+density%0Afunction+handleHeatMapPropChanges%28key%2C+value%29+%7B%0A++++assignHeatMapLayers%28%29%3B%0A++++if+%28%21key+%26%26+heatmap%29+%7B%0A++++++++heatmap.set%28%27gradient%27%2C+heatmap.get%28%27gradient%27%29+%3F+null+%3A+Prefab.gradient%29%3B%0A++++++++heatmap.set%28%27opacity%27%2C+heatmap.get%28%27opacity%27%29+%3F+null+%3A+Prefab.opacity%29%3B%0A++++++++heatmap.set%28%27radius%27%2C+heatmap.get%28%27radius%27%29+%3F+null+%3A+Prefab.pixeldensity%29%3B%0A++++++++return%3B%0A++++%7D%0A++++if+%28%21heatmap+%7C%7C+%21value%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++if+%28key+%3D%3D%3D+%27pixeldensity%27%29+%7B%0A++++++++key+%3D+%27radius%27%3B%0A++++%7D%0A++++heatmap.set%28key%2C+heatmap.get%28key%29+%3F+null+%3A+value%29%3B%0A%7D%0A%2F%2Fon+Location+change+prepare+data+based+on+map+type%0Afunction+triggerLocationFn%28dataset%29+%7B%0A++++if+%28Prefab.maptype+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++onLocationsChange%28dataset%29%3B%0A++++%7D+else+if+%28Prefab.maptype+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++prepareHeatMapData%28dataset%29%3B%0A++++%7D%0A%7D%0A%0Afunction+triggerLatLngChanges%28%29+%7B%0A++++if+%28Prefab.maptype+%3D%3D%3D+%27Markers%27%29+%7B%0A++++++++_buildMap%28%29%3B%0A++++%7D+else+if+%28Prefab.maptype+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++prepareHeatMapData%28Prefab.locations%29%3B%0A++++%7D%0A%7D%0A%2F*+Define+the+property+change+handler.+This+function+will+be+triggered+when+there+is+a+change+in+the+prefab+property+*%2F%0A%0Afunction+propertyChangeHandler%28key%2C+newVal%29+%7B%0A++++switch+%28key%29+%7B%0A++++case+%27maptype%27%3A%0A++++++++mapTypeOperations%28newVal%29%3B%0A++++++++break%3B%0A++++case+%27locations%27%3A%0A++++++++triggerLocationFn%28newVal%29%3B%0A++++++++break%3B%0A++++case+%27gradient%27%3A%0A++++case+%27opacity%27%3A%0A++++case+%27pixeldensity%27%3A%0A++++++++handleHeatMapPropChanges%28key%2C+newVal%29%3B%0A++++++++break%3B%0A++++case+%27markertype%27%3A%0A++++++++onMarkerTypeChange%28newVal%29%3B%0A++++++++break%3B%0A++++case+%27address%27%3A%0A++++++++_buildMap%28%29%3B%0A++++++++break%3B%0A++++case+%27lat%27%3A%0A++++++++_lat+%3D+newVal%3B%0A++++++++triggerLatLngChanges%28%29%3B%0A++++++++break%3B%0A++++case+%27lng%27%3A%0A++++++++_lng+%3D+newVal%3B%0A++++++++triggerLatLngChanges%28%29%3B%0A++++++++break%3B%0A++++case+%27icon%27%3A%0A++++++++_icon+%3D+newVal%3B%0A++++++++_buildMap%28%29%3B%0A++++++++break%3B%0A++++case+%27shade%27%3A%0A++++case+%27radius%27%3A%0A++++++++if+%28Prefab.widgetid%29+%7B%0A++++++++++++_buildMap%28%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27zoom%27%3A%0A++++++++if+%28%21isNaN%28newVal%29%29+%7B%0A++++++++++++Prefab.zoomLevel+%3D+newVal+%3E%3D+2+%3F+newVal+%3A+2%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27origin%27%3A%0A++++++++if+%28Prefab.maptype+%3D%3D%3D+%27Route%27%29+%7B%0A++++++++++++Prefab.directionsData.origin+%3D+newVal%3B%0A++++++++++++_updateDirections%28%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27destination%27%3A%0A++++++++if+%28Prefab.maptype+%3D%3D%3D+%27Route%27%29+%7B%0A++++++++++++Prefab.directionsData.destination+%3D+newVal%3B%0A++++++++++++_updateDirections%28%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++case+%27waypoints%27%3A%0A++++++++prepareWayPoints%28newVal%29%3B%0A++++++++Prefab.widgetProps.stopover.show+%3D+newVal+%3F+true+%3A+false%3B%0A++++++++break%3B%0A++++case+%27travelmode%27%3A%0A++++++++Prefab.travelMode+%3D+newVal.toUpperCase%28%29%3B%0A++++++++break%3B%0A++++case+%27trafficlayer%27%3A%0A++++++++Prefab.trafficLayer+%3D+newVal%3B%0A++++++++break%3B%0A++++case+%27transitlayer%27%3A%0A++++++++Prefab.transitLayer+%3D+newVal%3B%0A++++++++break%3B%0A++++case+%27show%27%3A%0A++++++++if+%28newVal%29+%7B%0A++++++++++++%24el.find%28%27ng-map%27%29.css%28%27height%27%2C+Prefab.height%29%3B%0A++++++++++++_refreshMap%28%29%3B%0A++++++++%7D%0A++++++++break%3B%0A++++%7D%0A%7D%0A%0Afunction+refresh%28%29+%7B%0A++++%2F%2Fcheck+if+the+maps+object+is+formed+and+then+refresh%0A++++if+%28%21Prefab.maps%5B0%5D%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++var+mapData+%3D+Prefab.maps%5B0%5D%3B%0A++++%2F%2Fre-size+the+map+whenever+the+map+is+loaded+in+any+container+like+dialog%2C+tabs+or+any+hidden+elements%0A++++setTimeout%28function+%28%29+%7B%0A++++++++google.maps.event.trigger%28mapData%2C+%27resize%27%29%3B%0A++++++++%2F%2Fcheck+for+the+lat%2C+lng+values+if+they%27re+NaN+and+they+exist%0A++++++++if+%28Prefab.centerData+%26%26+%28%21%28isNaN%28Prefab.centerData.lat%29+%7C%7C+isNaN%28Prefab.centerData.lng%29%29%29%29+%7B%0A++++++++++++mapData.panTo%28constructLatLngObject%28Prefab.centerData.lat%2C+Prefab.centerData.lng%29%29%3B%0A++++++++%7D%0A++++%7D%2C+100%29%3B%0A%7D%0A%2F*+register+the+property+change+handler+*%2F%0A%0APrefab.onPropertyChange+%3D+propertyChangeHandler%3B%0A_refreshMap+%3D+_.debounce%28refresh%2C+80%29%3B%0A%2F%2Ftoggle+the+loader+visibility+based+on+the+requirement%0Afunction+toggleLoader%28visibility%29+%7B%0A++++setTimeout%28function+%28%29+%7B%0A++++++++Prefab.isMapLoading+%3D+visibility%3B%0A++++%7D%29%3B%0A%0A%7D%0A%2F%2Fchecks+if+the+map+is+back+to+the+idle+state+by+comparing+the+bounds+i.e+checking+if+the+map+tiles+are+loaded%0Afunction+checkMapStatus%28%29+%7B%0A++++if+%28Prefab.maps%5B0%5D.lastBounds+%3D%3D+Prefab.maps%5B0%5D.getBounds%28%29%29+%7B%0A++++++++toggleLoader%28false%29%3B%0A++++%7D+else+%7B%0A++++++++Prefab.maps%5B0%5D.lastBounds+%3D+Prefab.maps%5B0%5D.getBounds%28%29%3B%0A++++++++_checkMapStatus%28%29%3B%0A++++%7D%0A%7D%0A_checkMapStatus+%3D+_.debounce%28checkMapStatus%2C+500%29%3B%0AApp.subscribe%28%27mapInitialized%27%2C+function+%28event%2C+evtMap%29+%7B%0A++++Prefab.maps.push%28evtMap%29%3B%0A++++%24el.find%28%27div%5Bname%3Dgooglemapview%5D%27%29.css%28%27z-index%27%2C+%2715%27%29%3B+%2F%2Fover-rides+the+prefab+default+z-index+%2F%2Fneeded+when+the+search+widget+is+on+top+of+the+map%2C+results+are+overlapped+by+map%0A++++handleHeatMapPropChanges%28%29%3B%0A++++_refreshMap%28%29%3B+%2F%2Fnow+call+the+refresh+method+to+resize+map%2C+needed+when+the+map+is+inside+the+dialogs+or+any+other+hidden+element%0A++++%2F%2Fadd+event+listener+to+enable+the+spinner+when+an+operation+is+performed+on+maps%0A++++google.maps.event.addListener%28evtMap%2C+%27bounds_changed%27%2C+function+%28%29+%7B%0A++++++++toggleLoader%28true%29%3B%0A++++++++_checkMapStatus%28%29%3B%0A++++%7D%29%3B%0A%0A++++%2F%2Fhide+the+spinner+when+the+map+comes+back+to+the+idle+state.%0A++++google.maps.event.addListener%28evtMap%2C+%27idle%27%2C+function+%28%29+%7B%0A++++++++evtMap.lastBounds+%3D+evtMap.getBounds%28%29%3B%0A++++++++toggleLoader%28false%29%3B%0A++++%7D%29%3B%0A%0A++++%2F%2Fthis+function+places+the+marker+based+on+the+click+event+lat%2Flng+values%0A++++function+placeMarker%28location%29+%7B%0A++++++++var+marker+%3D+new+google.maps.Marker%28%7B%0A++++++++++++position%3A+location%2C%0A++++++++++++map%3A+evtMap%0A++++++++%7D%29%3B%0A%0A++++++++evtMap.panTo%28location%29%3B%0A++++++++google.maps.event.addListener%28marker%2C+%27click%27%2C+function+%28event%29+%7B%0A++++++++++++prefabScope.activeMarker+%3D+%7B%0A++++++++++++++++%27event%27%3A+event%2C%0A++++++++++++++++%27marker%27%3A+marker%0A++++++++++++%7D%3B%0A%0A++++++++++++Utils.triggerFn%28Prefab.onMarkerClick.bind%28event%2C+event.latLng%29%29%3B%0A++++++++%7D%29%3B%0A%0A++++%7D%0A++++%2F%2Fif+the+onClick+event+is+specified+then+add+a+active+click+listener+on+the+map%0A++++if+%28Prefab.onClick%29+%7B%0A++++++++Utils.triggerFn%28function+%28%29+%7B%0A++++++++++++google.maps.event.addListener%28evtMap%2C+%27click%27%2C+function+%28event%29+%7B%0A++++++++++++++++prefabScope.activeClick+%3D+%7B%0A++++++++++++++++++++%27event%27%3A+event%2C%0A++++++++++++++++++++%27latLng%27%3A+event.latLng%0A++++++++++++++++%7D%3B%0A%0A++++++++++++++++if+%28Prefab.addMarkerOnClick%29+%7B%0A++++++++++++++++++++placeMarker%28event.latLng%29%3B%0A++++++++++++++++%7D%0A++++++++++++++++Utils.triggerFn%28Prefab.onClick%29%3B%0A++++++++++++%7D%29%3B%0A%0A++++++++%7D%29%3B%0A%0A++++%7D%0A++++if+%28Prefab.maptype+%3D%3D%3D+%27Heatmap%27%29+%7B%0A++++++++evtMap.setZoom%28evtMap.zoom+-+1%29%3B%0A++++%7D%0A++++_checkMapStatus%28%29%3B%0A%7D%29%3B%0A%0AApp.subscribe%28%27%24destroy%27%2C+function+%28%29+%7B%0A++++assignHeatMapLayers%28%29%3B%0A++++if+%28heatmap%29+%7B%0A++++++++heatmap.setMap%28null%29%3B%0A++++%7D%0A++++%24el.remove%28%29%3B+%2F%2Fclears+the+element+and+the+references+created+by+google+to+draw+the+map+%28as+a+fix+for+IE%29%0A++++%2F%2Fclear+all+the+created+event+listeners+%2F+heatmap+instance+if+any+existed%0A++++if+%28%21Prefab.map%29+%7B%0A++++++++return%3B%0A++++%7D%0A++++Prefab.map.heatmapLayer+%3D+undefined%3B%0A%7D%29%3B%0A%0APrefab.refresh+%3D+_refreshMap%3B%0AprefabScope+%3D+%24el.closest%28%27.app-prefab%27%29.isolateScope%28%29%3B%0AprefabScope.redraw+%3D+_refreshMap%3B%0AprefabScope.markLatLng+%3D+markLatLng%3B%0AprefabScope.markAddress+%3D+markAddress%3B%0AprefabScope.removeMarker+%3D+removeMarker%3B%0AprefabScope.clearAllMarkers+%3D+_removeMarkers%3B%0AprefabScope.showInfoWindow+%3D+Prefab.showInfoWindow%3B",
  "styles" : ".angular-google-map-container+%7B%0A++++height%3A+300px%3B%0A%7D",
  "variables" : "%7B+%7D"
}